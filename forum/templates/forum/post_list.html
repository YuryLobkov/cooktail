{% extends 'forum/base.html' %}
{% block title %}Posts{% endblock title %}
{% block content %}
<h1>FORUM</h1>
<a href="/forum">Back to home</a>
<a href="/forum/create-post">Create post</a>
<br></br>
{% for post in posts %}
<ol>
    <li>
        <table>
            <tr>
                <th style="border: 1px black solid;">Author</th>
                <th style="border: 1px black solid;">Title</th>
                <th style="border: 1px black solid;">Content</th>
                <th style="border: 1px black solid;">Created at</th>
                <th style="border: 1px black solid;">Updated at</th>
            </tr>
            <tr>
                <td style="border: 1px black solid;">{{post.author.username}}</td>
                <td style="border: 1px black solid;">{{post.title}}</td>
                <td style="border: 1px black solid;">{{post.content}}</td>
                <td style="border: 1px black solid;">{{post.created_at}}</td>
                <td style="border: 1px black solid;">{{post.updated_at}}</td>
            </tr>
        </table>
    </li>
    
    <div>
        <table>
            <tr>
                {% if user == post.author %}
                    <th>
                        <form method="POST">
                            {% csrf_token %}
                            <button type="submit" name="post-id" value="{{post.id}}">❌</button>
                        </form>
                    </th>
                    <th>
                        <form action="{% url 'forum:update-post' post.pk %}">
                            <button type="submit">✏</button>
                        </form>
                    </th>                        
                {% endif %}
            </tr>
        </table>
    </div>
</ol>
{% empty %}
<p>No posts yet :(</p>
{% endfor %}

{% endblock content %}